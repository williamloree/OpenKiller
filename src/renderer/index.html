<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'"
    />
    <title>Open Killer - Gestionnaire de Ports</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header de l'application -->
    <header class="app-header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo-icon">
            <svg
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="2"
              />
              <circle cx="12" cy="12" r="3" fill="currentColor" />
              <line
                x1="12"
                y1="2"
                x2="12"
                y2="7"
                stroke="currentColor"
                stroke-width="2"
              />
              <line
                x1="12"
                y1="17"
                x2="12"
                y2="22"
                stroke="currentColor"
                stroke-width="2"
              />
              <line
                x1="2"
                y1="12"
                x2="7"
                y2="12"
                stroke="currentColor"
                stroke-width="2"
              />
              <line
                x1="17"
                y1="12"
                x2="22"
                y2="12"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
          </div>
          <div class="title-section">
            <h1>Open Killer</h1>
            <p class="subtitle">Gestionnaire de ports système</p>
          </div>
        </div>
        <div class="header-actions">
          <button
            id="refreshBtn"
            class="btn btn-secondary"
            title="Actualiser la liste"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.8273 3 17.35 4.47617 18.8498 6.74984"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M21 3V8H16"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>Actualiser</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Conteneur principal -->
    <main class="main-content">
      <!-- Section Favoris -->
      <!-- <section class="favorites-section">
      <h2 class="section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
        </svg>
        Ports Favoris
      </h2>
      <div id="favoritesPorts" class="favorites-grid">
        Les ports favoris seront injectés ici dynamiquement
      </div>
    </section> -->

      <!-- Section de recherche et filtres -->
      <section class="search-section">
        <div class="search-wrapper">
          <svg
            class="search-icon"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              cx="11"
              cy="11"
              r="8"
              stroke="currentColor"
              stroke-width="2"
            />
            <path
              d="M21 21L16.65 16.65"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="Rechercher par port ou application..."
            autocomplete="off"
          />
          <button
            id="clearSearch"
            class="clear-search"
            title="Effacer la recherche"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18 6L6 18M6 6L18 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </div>
        <div class="filter-info">
          <span id="portCount" class="port-count">0 ports</span>
          <span id="filterStatus" class="filter-status"></span>
        </div>
      </section>

      <!-- Section du tableau des ports -->
      <section class="ports-section">
        <div class="table-wrapper">
          <table class="ports-table">
            <thead>
              <tr>
                <th class="col-port sortable" data-sort="port">
                  Port
                  <svg
                    class="sort-icon"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12 5V19M12 5L6 11M12 5L18 11"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </th>
                <th class="col-protocol">Protocole</th>
                <th class="col-address">Adresse</th>
                <th class="col-process sortable" data-sort="process">
                  Application
                  <svg
                    class="sort-icon"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12 5V19M12 5L6 11M12 5L18 11"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </th>
                <th class="col-pid">PID</th>
                <th class="col-actions">Actions</th>
              </tr>
            </thead>
            <tbody id="portsTableBody">
              <!-- Les lignes du tableau seront injectées ici dynamiquement -->
            </tbody>
          </table>

          <!-- Message d'état vide -->
          <div id="emptyState" class="empty-state" style="display: none">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="2"
                opacity="0.3"
              />
              <path
                d="M12 8V12L14 14"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            <h3>Aucun port trouvé</h3>
            <p>Aucun port ouvert ne correspond à votre recherche.</p>
          </div>

          <!-- Indicateur de chargement -->
          <div id="loadingState" class="loading-state">
            <div class="spinner"></div>
            <p>Chargement des ports...</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast de notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Modal de confirmation -->
    <div id="confirmModal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Confirmer l'action</h3>
          <button class="modal-close" onclick="closeModal()">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18 6L6 18M6 6L18 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p id="modalMessage">
            Êtes-vous sûr de vouloir terminer ce processus ?
          </p>
          <div class="modal-details">
            <div class="detail-item">
              <span class="detail-label">Port:</span>
              <span id="modalPort" class="detail-value">-</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">PID:</span>
              <span id="modalPid" class="detail-value">-</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Application:</span>
              <span id="modalProcess" class="detail-value">-</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeModal()">
            Annuler
          </button>
          <button id="confirmKillBtn" class="btn btn-danger">
            Terminer le processus
          </button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
